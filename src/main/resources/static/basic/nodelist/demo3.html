<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Demo: NodeList Extensions: dojo/NodeList-data</title>
    <link rel="stylesheet" href="style.css" media="screen">
    <link rel="stylesheet" href="demo.css" media="screen">
    <link rel="stylesheet" href="../../js/dijit/themes/claro/claro.css" media="screen">
</head>
<body class="claro">
<h3>Demo: NodeList Extensions: dojo/NodeList-data</h3>
<button type="button" id="btn">Inspect Data</button>

<h3>Fruits</h3>
<p>Click the fruits you like!</p>
<ul class="fruitList">
    <li class="fresh">Apples</li>
    <li class="fresh">Persimmons</li>
    <li class="fresh">Grapes</li>
    <li class="fresh">Fresh Figs</li>
    <li class="dried">Dates</li>
    <li class="dried">Raisins</li>
    <li class="dried">Prunes</li>
    <li class="fresh dried">Apricots</li>
    <li class="fresh">Peaches</li>
    <li class="fresh">Bananas</li>
    <li class="fresh">Cherries</li>
</ul>

<script src="../../js/dojo/dojo.js" data-dojo-config="isDebug: true, async: true, parseOnLoad: false"></script>
<script>
    require(['dojo/query', 'dojo/NodeList-data', 'dojo/domReady!'], function (query, NodeList) {
        function mark(evt) {
            var nodeList = new NodeList(this);
            nodeList.data("updated", new Date());
        }
        query('li').data('updated', new Date()).on('click', mark);
        query('#btn').on('click', function () {
            query('li').data('updated').forEach(function (date) {
                log(date.getTime());
            });
        });

        function log(msg) {
            var c = document.getElementById('console');
            if(!c){
                c = document.createElement('div');
                c.setAttribute('id', 'console');
                document.body.appendChild(c);
            }
            c.innerHTML += '<div>' + msg + '</div>';
        }
    });
</script>
</body>
</html>